<!DOCTYPE html>
<html>
    <head>
        <title>VARLab : How-to: Integrate UXML Templates with Controllers and Backend</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">VARLab</a></span>
                            </li>
                                                    <li>
                                <span><a href="VARLab_44990773.html">VARLab</a></span>
                            </li>
                                                    <li>
                                <span><a href="Learning-Experience_972881951.html">Learning Experience</a></span>
                            </li>
                                                    <li>
                                <span><a href="216629273.html">Digital Learning Experiences (DLX)</a></span>
                            </li>
                                                    <li>
                                <span><a href="706347009.html">LSM8.02 - Conestoga Trades: Electrician Simulator</a></span>
                            </li>
                                                    <li>
                                <span><a href="Development-Documentations_1066237953.html">Development Documentations</a></span>
                            </li>
                                                    <li>
                                <span><a href="User-Interfaces_1531150391.html">User Interfaces</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            VARLab : How-to: Integrate UXML Templates with Controllers and Backend
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> User 7e2a4</span>, last modified on Aug 15, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>As part of the ongoing efforts to enhance the simulation's user interface, this page aims to provide comprehensive documentation on the proper steps to integrate pre-existing UXML templates with custom controllers and connect them to the simulation's backend.</p><h2 id="How-to:IntegrateUXMLTemplateswithControllersandBackend-CreatingtheController"><img class="emoticon emoticon-blue-star" data-emoji-id="1f4d8" data-emoji-shortname=":blue_book:" data-emoji-fallback="\uD83D\uDCD8" src="images/icons/emoticons/72/1f4d8.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/>¬† Creating the Controller</h2><ol start="1"><li><p>Name the controller following naming conventions (e.g., NameMenuController, NameDialogController, &lt;BackendHandler&gt;UI) and place it in the<strong> </strong><code>Assets/Scripts/UI</code> directory</p></li><li><p>Identify relevant events that the controller should communicate to other components (e.g., MenuInitialized, MenuOpened, MenuClosed, CloseButtonPressed, BackButtonPressed, component-specific events)</p></li></ol><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-143117.png" width="735" loading="lazy" src="attachments/1288339477/1288765466.png?width=735" data-image-src="attachments/1288339477/1288765466.png" data-height="111" data-width="735" data-unresolved-comment-count="0" data-linked-resource-id="1288765466" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-143117.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="18538100-5285-4cd7-8e52-c06db3d2ba65" data-media-type="file"></span><ol start="3"><li><p>Determine any serialized fields, colors, or UXML template elements that the controller needs to access</p><ol start="1"><li><p>Use constants to have in-code names to find UI Elements</p></li></ol></li></ol><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-143223.png" width="695" loading="lazy" src="attachments/1288339477/1288634387.png?width=695" data-image-src="attachments/1288339477/1288634387.png" data-height="433" data-width="695" data-unresolved-comment-count="0" data-linked-resource-id="1288634387" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-143223.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="a1218fbf-967d-4b8d-97cf-c97d2d1a002a" data-media-type="file"></span><ol start="4"><li><p>Implement common controller functionality (see the images below):</p><ol start="1"><li><p><code>InitUI</code> method to initialize <strong>all required </strong>UI elements</p></li><li><p><code>DisplayMenu</code> method to show/hide the menu and trigger corresponding open and close events</p></li><li><p><code>Start</code> event to initialize the UI and hide the menu <strong>on startup</strong></p></li></ol></li></ol><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-142249.png" width="624" loading="lazy" src="attachments/1288339477/1288372246.png?width=624" data-image-src="attachments/1288339477/1288372246.png" data-height="782" data-width="624" data-unresolved-comment-count="0" data-linked-resource-id="1288372246" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-142249.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="02f0736f-6faf-4220-9070-a37cc9e2db9f" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-143517.png" width="577" loading="lazy" src="attachments/1288339477/1288667147.png?width=577" data-image-src="attachments/1288339477/1288667147.png" data-height="292" data-width="577" data-unresolved-comment-count="0" data-linked-resource-id="1288667147" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-143517.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="8f4dd15c-9b53-46d3-b1dc-514906c2b24d" data-media-type="file"></span><p> 5. Expose public methods for other components to communicate with the controller (see image below for an example)</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-143717.png" width="760" loading="lazy" src="attachments/1288339477/1288896542.png?width=760" data-image-src="attachments/1288339477/1288896542.png" data-height="284" data-width="791" data-unresolved-comment-count="0" data-linked-resource-id="1288896542" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-143717.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="bc2bdc67-a60d-47d2-b185-7f4377ba6526" data-media-type="file"></span><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Follow best practices for code organization, separation of concerns, and <a data-card-appearance="inline" href="https://varlab-dev.atlassian.net/wiki/x/fAOMAw" rel="nofollow">https://varlab-dev.atlassian.net/wiki/x/fAOMAw</a>  to implement the controller and other required features.</p></div></div><h2 id="How-to:IntegrateUXMLTemplateswithControllersandBackend-TestingtheController"><img class="emoticon emoticon-tick" data-emoji-id="atlassian-check_mark" data-emoji-shortname=":check_mark:" data-emoji-fallback=":check_mark:" src="images/icons/emoticons/check.png" width="16" height="16" data-emoticon-name="tick" alt="(tick)"/>  Testing the Controller</h2><ul><li><p>Link to <a data-card-appearance="inline" href="https://varlab-dev.atlassian.net/wiki/x/AYCvL" rel="nofollow">https://varlab-dev.atlassian.net/wiki/x/AYCvL</a> for guidance on writing any test cases for the controller.</p><ul><li><p>UI testing is generally integration and unit testing, as the focus is on verifying the controller‚Äôs core functionality and integration with other components, such as event handling, data binding, and UI state management.</p></li></ul></li><li><p>Refer to existing test files under <code>Assets/Tests/PlayMode</code> for examples of how to write tests for UI controllers and dialogs</p></li><li><p>The <strong>Unity Full-Stack Testing Tutorial</strong> covers best practices for unit, integration, and end-to-end testing within the Unity ecosystem, and should serve as a comprehensive reference for your testing needs</p></li></ul><h2 id="How-to:IntegrateUXMLTemplateswithControllersandBackend-AddingtheControllertotheScene"><img class="emoticon emoticon-plus" data-emoji-id="atlassian-plus" data-emoji-shortname=":plus:" data-emoji-fallback=":plus:" src="images/icons/emoticons/add.png" width="16" height="16" data-emoticon-name="plus" alt="(plus)"/>  Adding the Controller to the Scene</h2><ol start="1"><li><p>Create an empty GameObject in the Main Scene and name it according to the UI menu/dialog you‚Äôre integrating (e.g., ‚ÄúBackend Handler Dialog‚Äù)</p></li><li><p>Add a UI Document component to this GameObject</p></li><li><p>Drag the Panel Settings asset from <code>Assets/UI Toolkit</code> onto the <strong>Panel Settings</strong> serialized object of the UI Document component</p></li><li><p>Drag your UXML template onto the <strong>Source Asset </strong>serialized object of the UI Document component</p><ol start="1"><li><p><strong>You should now see the dialog/menu pop up in the Game view</strong></p></li></ol></li></ol><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-145737.png" width="626" loading="lazy" src="attachments/1288339477/1288536143.png?width=626" data-image-src="attachments/1288339477/1288536143.png" data-height="376" data-width="626" data-unresolved-comment-count="0" data-linked-resource-id="1288536143" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-145737.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="864735a0-b46c-4d7a-b38f-e6e3f366cb23" data-media-type="file"></span><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If the menu/dialog is not visible, please ensure that the <strong>UXML Template </strong>is set up properly and that the references in the <strong>UI Document component </strong>are the expected (global Panel Settings and the UXML template for the specific window/menu/dialog)</p></div></div><ol start="5"><li><p>Add your controller script as a component to the same GameObject</p><ol start="1"><li><p><strong>You should see all of your events serialized with the script</strong></p></li></ol></li></ol><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-150055.png" width="624" loading="lazy" src="attachments/1288339477/1288765484.png?width=624" data-image-src="attachments/1288339477/1288765484.png" data-height="728" data-width="624" data-unresolved-comment-count="0" data-linked-resource-id="1288765484" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-150055.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="11294bf2-7442-4809-83d0-294eebf97727" data-media-type="file"></span><p /><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If the events are not serialized, ensure that they‚Äôre properly serialized like the examples shown before in <a href="https://varlab-dev.atlassian.net/wiki/spaces/VAR/pages/edit-v2/1288339477?draftShareId=921b06bb-def2-4b0c-8818-d9c99c42236f#%5CuD83D%5CuDCD8-Creating-the-Controller" rel="nofollow">Creating the Controller</a> </p></div></div><p /><ol start="6"><li><p>Move the GameObject into the <code>Systems/UI</code> object</p><ol start="1"><li><p>This ensures that the Systems prefab keeps track of all the UI-related systems used within the simulation</p></li></ol></li><li><p>Apply these changes to the Systems prefab</p><ol start="1"><li><p>This allows you to apply changes to the prefab, rather than the main scene.</p></li></ol></li></ol><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Any changes made directly to the main scene should be discarded within your source control system. The recommended workflow is to make all changes to the prefabs and then discard any changes in the main scene. This ensures a consistent and maintainable project structure.</p></div></div><h2 id="How-to:IntegrateUXMLTemplateswithControllersandBackend-SettingupUnityEvents"><img class="emoticon emoticon-green-star" data-emoji-id="atlassian-green_star" data-emoji-shortname=":green_star:" data-emoji-fallback=":green_star:" src="images/icons/emoticons/star_green.png" width="16" height="16" data-emoticon-name="green-star" alt="(green star)"/>  Setting up Unity Events</h2><ul><li><p>Each serialized event in the controller script has two buttons - one to add functionality and one to remove it</p></li><li><p>To add functionality to an event:</p><ul><li><p>Click the ‚Äú+‚Äù button next to the event</p></li><li><p>Drag the specific scene object that contains the functionality you want to add into the empty slot</p></li><li><p>Assign the desire method or property from that object</p></li></ul></li></ul><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240815-172731.png" width="613" loading="lazy" src="attachments/1288339477/1288175667.png?width=613" data-image-src="attachments/1288339477/1288175667.png" data-height="767" data-width="613" data-unresolved-comment-count="0" data-linked-resource-id="1288175667" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240815-172731.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1288339477" data-linked-resource-container-version="4" data-media-id="07f9f58c-70fc-4e73-b149-665d4a3be7c2" data-media-type="file"></span><ul><li><p>You can attach any accessible public methods, set active states of GameObjects, hide/display menus, etc. to these events</p></li><li><p>Common events and their functionalities:</p><ul><li><p><strong>MenuInitialized:</strong> Call UIHandler.OnMenuInitialize to set up callbacks for entering/leaving the pointer on the menu, which triggers the UIBlocker to prevent scene interaction</p></li><li><p><strong>MenuOpened:</strong> Call UIHandler.EnableSceneInteraction(false) to blur the background and disable scene interaction (for larger menus)</p></li><li><p><strong>MenuClosed:</strong> Call UIHandler.EnableSceneInteraction(true) to re-enable scene interaction</p></li><li><p><strong>CloseButtonPressed:</strong> Call ToolbarUI.ResetSelectedButton and ToolbarUI.ResetFocus to reset any state in the toolbar</p></li><li><p><strong>BackButtonPressed:</strong> Trigger the DisplayMenu function for that controller</p></li></ul></li></ul><p>The specific functionality you attach will depend on <strong>the requirements of your particular controller</strong>, but these basic event handlers should get you started</p><h2 id="How-to:IntegrateUXMLTemplateswithControllersandBackend-TestingtheIntegratedUI"><img class="emoticon emoticon-blue-star" data-emoji-id="1f49a" data-emoji-shortname=":green_heart:" data-emoji-fallback="üíö" src="images/icons/emoticons/72/1f49a.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/>  Testing the Integrated UI</h2><ul><li><p>Thorough debugging is required to ensure the UI integration is working correctly</p></li><li><p>Test all possible paths, both happy and sad, to ensure the controller is robust and behaving as expected</p></li><li><p>Leverage the test cases from the previous sections to validate the controller's functionality</p></li><li><p>Consider using sequence diagrams to visualize the flow of events and ensure the event handling is correct</p></li></ul><p>When testing the integrated UI, the <strong>key</strong> things to focus on are:</p><ol start="1"><li><p><strong>Verify Functionality</strong>: Ensure all the features and interactions work as expected, covering both successful and error scenarios.</p></li><li><p><strong>Check Event Handling</strong>: Confirm the event handlers are properly serialized and the UI state is updated accordingly.</p></li><li><p><strong>Test Edge Cases</strong>: Identify and test edge cases, such as the behavior when the user rapidly switches between menus or interacts with the UI in unexpected ways.</p></li><li><p><strong>Ensure Consistency</strong>: Verify the UI styling, layout, and overall user experience is consistent with the design guidelines and across the sim.</p></li></ol><p>Once done testing, <strong>make sure</strong> to apply the changes to the systems prefab again and discard any Main Scene changes.</p><div class="panel" style="background-color: #EAE6FF;border-color: #998DD9;border-width: 1px;"><div class="panelContent" style="background-color: #EAE6FF;">
<p>This guide should provide a comprehensive overview of the steps needed to integrate a UXML Template and convert it into a well-structured UI flow, including the use of controllers, events, and proper component communication.</p><p><strong>Happy Coding!</strong></p>
</div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288568878.png">image-20240815-141959.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288372246.png">image-20240815-142249.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288634380.png">image-20240815-142411.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288765466.png">image-20240815-143117.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288634387.png">image-20240815-143223.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288667147.png">image-20240815-143517.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288896542.png">image-20240815-143717.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288536143.png">image-20240815-145737.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288765484.png">image-20240815-150055.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1288339477/1288175667.png">image-20240815-172731.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 11, 2025 14:17</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
